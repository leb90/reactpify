{% comment %}
  CountdownTimer Section - Auto-generated with Metaobject Support
  Liquid template that renders SSR data and prepares React hydration
{% endcomment %}

{% schema %}
{
  "name": "Countdown Timer",
  "tag": "section",
  "class": "countdown-timer-section",
  "settings": [
    {
      "type": "header",
      "content": "CountdownTimer Settings"
    },
    {
      "type": "text",
      "id": "targetdate",
      "label": "target Date",
      "default": "2024-12-31T23:59:59",
      "info": "Format: YYYY-MM-DDTHH:mm:ss"
    },
    {
      "type": "text",
      "id": "title",
      "label": "title",
      "default": "Sample title"
    },
    {
      "type": "checkbox",
      "id": "showdays",
      "label": "show Days",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "showhours",
      "label": "show Hours",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "showminutes",
      "label": "show Minutes",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "showseconds",
      "label": "show Seconds",
      "default": true
    },
    {
      "type": "color",
      "id": "backgroundcolor",
      "label": "background Color",
      "default": "#3b82f6"
    },
    {
      "type": "color",
      "id": "textcolor",
      "label": "text Color",
      "default": "#3b82f6"
    }
  ],
  "presets": [
    {
      "name": "Countdown Timer"
    }
  ]
}
{% endschema %}

{%- liquid
  assign targetdate = section.settings.targetdate
  assign title = section.settings.title
  assign showdays = section.settings.showdays
  assign showhours = section.settings.showhours
  assign showminutes = section.settings.showminutes
  assign showseconds = section.settings.showseconds
  assign backgroundcolor = section.settings.backgroundcolor
  assign textcolor = section.settings.textcolor
-%}

<section class="countdown-timer-section" id="countdown-timer-section-{{ section.id }}">
  
  {%- comment -%} React Component Root {%- endcomment -%}
  <div data-component-root="CountdownTimer" class="countdown-timer-container">
    
    {%- comment -%} JSON data for React - Script with data-section-data {%- endcomment -%}
    <script type="application/json" data-section-data>
      {
        "componentName": "CountdownTimer",
        "targetDate": {{ targetdate | json }},
        "title": {{ title | json }},
        "showDays": {{ showdays | json }},
        "showHours": {{ showhours | json }},
        "showMinutes": {{ showminutes | json }},
        "showSeconds": {{ showseconds | json }},
        "backgroundColor": {{ backgroundcolor | json }},
        "textColor": {{ textcolor | json }},
        "settings": {
          "targetDate": {{ targetdate | json }},
        "title": {{ title | json }},
        "showDays": {{ showdays | json }},
        "showHours": {{ showhours | json }},
        "showMinutes": {{ showminutes | json }},
        "showSeconds": {{ showseconds | json }},
        "backgroundColor": {{ backgroundcolor | json }},
        "textColor": {{ textcolor | json }},
          "sectionId": "{{ section.id }}"
        }
      }
    </script>

    {%- comment -%} Smart Fallback Content - Shows if JavaScript doesn't load {%- endcomment -%}
    <div class="countdown-timer-fallback" style="display: block;">
      <div style="
      position: relative;
      overflow: hidden;
      border-radius: 1rem;
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 2rem;
      text-align: center;
      margin: 2rem auto;
      max-width: 500px;
    ">
      <h2 style="
        font-size: 1.5rem;
        font-weight: bold;
        margin-bottom: 1rem;
      ">
        âœ¨ {% if title %}{{ title }}{% else %}CountdownTimer{% endif %}
      </h2>
      
      {% if subtitle %}
        <p style="margin-bottom: 1.5rem; opacity: 0.9;">{{ subtitle }}</p>
      {% endif %}
      
      <p style="font-size: 0.875rem; opacity: 0.8;">
        ðŸš€ React component loading...
      </p>
    </div>
    </div>
  </div>
</section>

<style>
  /* Hide fallback when React component loads */
  .countdown-timer-container:has(.reactpify-component) .countdown-timer-fallback {
    display: none !important;
  }
  
  /* Additional fallback cleanup */
  [data-component-root="CountdownTimer"]:has(.reactpify-component) .countdown-timer-fallback {
    display: none !important;
  }
</style>