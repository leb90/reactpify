# ğŸš€ Reactpify

**The ultimate React integration library for Shopify themes.** Build modern, interactive components with React while maintaining perfect SEO and theme compatibility.

## âœ¨ Features

### ğŸ”„ **Automatic Liquid Generation**
- **React â†’ Liquid**: Automatically generates Shopify Liquid templates from your React components
- **SEO-friendly fallbacks**: HTML shells rendered server-side for perfect SEO
- **Theme Editor compatibility**: Components work seamlessly in Shopify's theme customizer

### ğŸ¨ **Intelligent Theme Integration**
- **Automatic Style Analysis**: Detects and extracts original theme styles
- **Perfect Scoping**: CSS automatically scoped to avoid conflicts with existing theme
- **Tailwind Integration**: Full Tailwind CSS v4 support with theme-aware configuration

### ğŸ‘€ **Bidirectional Watch System**
- **React â†’ Liquid Sync**: Changes in React components automatically update Liquid files
- **Manual Edit Detection**: Detects when Liquid files are manually modified
- **Real-time Updates**: Vite-powered development with instant hot reloading

### ğŸ§© **Fragment System**
- **Reusable Snippets**: Share common Liquid schema fragments across components
- **Auto-injection**: Fragments automatically injected during build process
- **Extensible**: Easy to add custom fragments for your specific needs

## ğŸ“‹ Prerequisites

**Reactpify installs ON TOP of existing Shopify themes.** Before installing, you need:

### ğŸª **Existing Shopify Theme**
- A working Shopify theme directory with these folders:
  ```
  your-theme/
  â”œâ”€â”€ assets/
  â”œâ”€â”€ layout/
  â”œâ”€â”€ sections/
  â”œâ”€â”€ snippets/
  â””â”€â”€ templates/
  ```

### ğŸ¯ **Compatible Themes**
- âœ… **Dawn** (Shopify's free theme)
- âœ… **Horizon** (Latest Shopify theme)
- âœ… **Any modern Shopify theme** (Online Store 2.0+)
- âœ… **Custom themes** with standard structure

### ğŸš€ **How to Get a Shopify Theme**

**Option 1: Download from your Shopify store**
```bash
# Install Shopify CLI
npm install -g @shopify/cli @shopify/theme

# Download your live theme
shopify theme pull

# Or start with Dawn (free theme)
shopify theme init my-theme --clone-url="https://github.com/Shopify/dawn"
```

**Option 2: Use an existing theme directory**
If you already have a Shopify theme folder, navigate to it:
```bash
cd your-existing-theme/
# Now you can install Reactpify
```

## ğŸš€ Quick Start

### Installation

**âš ï¸ Important: Run this command INSIDE your Shopify theme directory**

```bash
cd your-theme-folder/
npm install reactpifyjs
```

Reactpify will automatically:
- âœ… Detect your Shopify theme
- âœ… Install all necessary files
- âœ… Update `layout/theme.liquid`
- âœ… Create example components
- âœ… Set up the build system

### Basic Usage

1. **Create a React Component**

```tsx
// src/components/hello/Hello.tsx
import React, { useState } from 'react';

interface HelloProps {
  title?: string;
  showButton?: boolean;
}

export const Hello: React.FC<HelloProps> = ({
  title = "Hello World",
  showButton = true
}) => {
  const [clicked, setClicked] = useState(false);

  return (
    <div className="reactpify-container max-w-md mx-auto p-6">
      <div className="bg-blue-500 text-white p-6 rounded-lg shadow-lg text-center">
        <h1 className="text-2xl font-bold mb-4">{title}</h1>
        
        {showButton && (
          <button 
            onClick={() => setClicked(!clicked)}
            className="bg-white text-blue-500 px-4 py-2 rounded hover:bg-gray-100 transition-colors font-semibold"
          >
            {clicked ? 'âœ… Clicked!' : 'ğŸ‘‹ Click me'}
          </button>
        )}
      </div>
    </div>
  );
};
```

2. **Create the Liquid Template**

```liquid
<!-- src/components/hello/section.hello.liquid -->
{% comment %}
Auto-generated by Reactpify
Component: Hello
{% endcomment %}

<div data-component-root data-section-data='{{ section | json | escape }}'>
  <div data-fallback>
    <div class="max-w-md mx-auto p-6">
      <div class="bg-blue-500 text-white p-6 rounded-lg shadow-lg text-center">
        <h1 class="text-2xl font-bold mb-4">{{ section.settings.title | default: 'Hello World' }}</h1>
        
        {% if section.settings.show_button %}
          <button class="bg-white text-blue-500 px-4 py-2 rounded font-semibold">
            ğŸ‘‹ Click me
          </button>
        {% endif %}
      </div>
    </div>
  </div>
</div>

{{ 'main.css' | asset_url | stylesheet_tag }}
{{ 'main.js' | asset_url | script_tag }}

{% schema %}
{
  "name": "Hello",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Hello World"
    },
    {
      "type": "checkbox",
      "id": "show_button",
      "label": "Show Button",
      "default": true
    },
    FRAGMENT.color-scheme,
    FRAGMENT.section-spacing
  ],
  "presets": [
    {
      "name": "Hello"
    }
  ]
}
{% endschema %}
```

3. **Register Your Component**

```tsx
// src/main.tsx
import { registerComponent, initRenderSystem } from './utils/helpers/renderComponents';
import { Hello } from './components/hello/Hello';

registerComponent('Hello', Hello);
initRenderSystem();
```

4. **Build and Deploy**

```bash
npm run build    # Production build
npm run watch    # Development with auto-reload
```

## ğŸ›  Advanced Features

### Theme Style Analyzer

Automatically analyzes your existing Shopify theme styles and integrates them seamlessly:

```bash
# Automatically runs on first build
npm run build
```

**What it does:**
- ğŸ” Scans `assets/*.css` for theme styles
- ğŸ¯ Extracts important selectors (`:root`, `.shopify-*`, `@keyframes`, etc.)
- ğŸ›¡ï¸ Scopes styles to avoid conflicts with React components
- ğŸ“„ Searches for embedded CSS in Liquid files
- ğŸ’¾ Generates `src/styles/theme-extracted.css` automatically

### Bidirectional Watch System

Monitor changes in both directions:

```bash
npm run watch
```

**Features:**
- ğŸ‘ï¸ Watches React component changes â†’ Auto-updates Liquid
- ğŸ”§ Detects manual Liquid file modifications
- âš¡ Real-time synchronization
- ğŸš« Prevents infinite loops with smart debouncing

### Fragment System

Create reusable Liquid schema fragments:

```liquid
<!-- src/utils/schema-fragments/custom-colors.liquid -->
{
  "type": "select",
  "id": "custom_color",
  "label": "Custom Color",
  "options": [
    { "value": "red", "label": "Red" },
    { "value": "blue", "label": "Blue" }
  ]
}
```

Use in your components:

```liquid
{% schema %}
{
  "settings": [
    FRAGMENT.custom-colors,
    FRAGMENT.color-scheme
  ]
}
{% endschema %}
```

## ğŸ“ Project Structure

```
your-theme/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ hello/
â”‚   â”‚       â”œâ”€â”€ Hello.tsx              # React component
â”‚   â”‚       â””â”€â”€ section.hello.liquid   # Liquid template
â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â”œâ”€â”€ main.css                   # Main styles
â”‚   â”‚   â””â”€â”€ theme-extracted.css        # Auto-generated theme styles
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ schema-fragments/          # Reusable Liquid fragments
â”‚   â””â”€â”€ main.tsx                       # Entry point
â”œâ”€â”€ sections/
â”‚   â””â”€â”€ hello.liquid                   # Auto-copied from src/
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ main.css                       # Built CSS
â”‚   â””â”€â”€ main.js                        # Built JS
â””â”€â”€ vite.config.ts                     # Vite configuration
```

## âš™ï¸ Configuration

### Vite Configuration

The library includes a pre-configured Vite setup optimized for Shopify:

```ts
// vite.config.ts - Already configured!
export default defineConfig(({ mode }) => ({
  // âœ… Theme Style Analyzer
  // âœ… Bidirectional Watch
  // âœ… Auto Component Registry
  // âœ… Fragment Injection
  // âœ… Tailwind CSS v4
  // âœ… CSS Extraction
  // âœ… Asset Optimization
}));
```

### Tailwind Configuration

Fully configured with theme-aware settings:

```js
// tailwind.config.js - Already configured!
export default {
  content: [
    './src/**/*.{ts,tsx}',
    './src/components/**/*.liquid',
    './sections/**/*.liquid'
  ],
  // âœ… Scoped to [data-component-root]
  // âœ… Preflight disabled
  // âœ… Custom Reactpify variables
  // âœ… Animation safelist
};
```

## ğŸ¯ Best Practices

### 1. Component Structure
- Keep components in `src/components/[name]/`
- Use consistent naming: `ComponentName.tsx` + `section.component-name.liquid`
- Always provide fallback HTML for SEO

### 2. Styling
- Use Tailwind classes for consistency
- Scope custom CSS with `.reactpify-*` classes
- Leverage CSS variables for theme integration

### 3. Liquid Templates
- Include `data-component-root` for React mounting
- Provide meaningful fallback content
- Use fragments for common schema patterns

### 4. Development Workflow
- Use `npm run watch` for development
- Test both JavaScript-enabled and disabled scenarios
- Verify theme customizer compatibility

## ğŸš€ Production Deployment

```bash
# Build for production
npm run build

# Files generated:
# âœ… assets/main.css - All styles combined
# âœ… assets/main.js - React components bundle
# âœ… sections/*.liquid - Updated Liquid templates
```

## ğŸ¤ Contributing

1. Fork the repository
2. Create your feature branch: `git checkout -b feature/amazing-feature`
3. Commit your changes: `git commit -m 'Add amazing feature'`
4. Push to the branch: `git push origin feature/amazing-feature`
5. Open a Pull Request

## ğŸ“ License

MIT License - see [LICENSE](LICENSE) file for details.

## ğŸ†˜ Support

- ğŸ“š [Documentation](https://github.com/yourusername/reactpify/docs)
- ğŸ› [Issue Tracker](https://github.com/yourusername/reactpify/issues)
- ğŸ’¬ [Discussions](https://github.com/yourusername/reactpify/discussions)

---

**Made with â¤ï¸ for the Shopify community**
